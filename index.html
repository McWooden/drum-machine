<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Drum Machine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/db3546443a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="d-flex justify-content-center align-items-center bg-primary my-5">
    <div id="drum-machine" class="bg-light rounded shadow text-center d-flex p-2 m-0">
        <div class="pad-bank p-4 d-flex flex-column">
            <div class="d-flex">
                <div class="col drum-pad shadow" id="Heater-1">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3" id="Q"></audio>
                    Q
                </div>
                <div class="col drum-pad shadow" id="Heater-2">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3" id="W"></audio>
                    W
                </div>
                <div class="col drum-pad shadow" id="Heater-3">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3" id="E"></audio>
                    E
                </div>
            </div>
            <div class="d-flex">
                <div class="col drum-pad shadow" id="Heater-4">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Heater-4_1.mp3" id="A"></audio>
                    A
                </div>
                <div class="col drum-pad shadow" id="Clap">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3" id="S"></audio>
                    S
                </div>
                <div class="col drum-pad shadow" id="Open-HH">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3" id="D"></audio>
                    D
                </div>
            </div>
            <div class="d-flex">
                <div class="col drum-pad shadow" id="Kick-n'Hat">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Kick_n_Hat.mp3" id="Z"></audio>
                    Z
                </div>
                <div class="col drum-pad shadow" id="Kick">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/RP4_KICK_1.mp3" id="X"></audio>
                    X
                </div>
                <div class="col drum-pad shadow" id="Closed-HH">
                    <audio class="clip" src="https://s3.amazonaws.com/freecodecamp/drums/Cev_H2.mp3" id="C"></audio>
                    C
                </div>
            </div>
        </div>
        <div class="d-flex flex-column display px-3 py-2">
            <div class="d-flex logo justify-content-end">
                <i class="fa-brands fa-free-code-camp fs-2 text-end"></i>
            </div>
            <div class="d-flex flex-column">
                <div id="display" class="border border-warning shadow-sm mt-2 d-flex align-items-center justify-content-center"></div>
                <label for="sound-level" class="form-label mt-3">Set sound level</label>
                <input type="range" class="form-range p-2 shadow-sm" id="sound-level" min="0" max="100" value="50">
            </div>
        </div>
    </div>
    <script>
        const display = document.getElementById('display')
        const clips = document.querySelectorAll('.clip');
        const range = document.getElementById("sound-level")
        const audioElements = document.querySelectorAll("audio")

        for (const clip of clips) {
            clip.addEventListener("ended", () => {
                clip.currentTime = 0
            })
        }
        for (const drumPad of document.querySelectorAll('.drum-pad')) {
            drumPad.addEventListener('click', idontknow)
        }
        document.addEventListener("keydown", (event) => {
            const audioElement = document.getElementById(event.key.toUpperCase())
            if (audioElement) {
                const parentElement = audioElement.parentElement.dispatchEvent(new Event('click'))
            }
        })
        function idontknow(e) {
            e.target.style.backgroundColor = 'gold'
            e.target.classList.remove('shadow')
            const audio = e.target.querySelector('audio')
            audio.currentTime = 0
            audio.play()
            display.innerText = e.target.id
            setTimeout(() => {
                e.target.style.backgroundColor = ''
                e.target.classList.add('shadow')
            }, 100)
        }
        
        range.addEventListener("input", function() {
            audioElements.forEach(function(audio) {
                audio.volume = range.value / 100
            })
        })

    </script>
    <!-- <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>